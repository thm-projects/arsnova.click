<!--
* This file is part of ARSnova Click.
* Copyright (C) 2016 The ARSnova Team
*
* ARSnova Click is free software: you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* ARSnova Click is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with ARSnova Click.  If not, see <http://www.gnu.org/licenses/>.
-->

<template name="live_results">
    <div id="liveResultsFrame">
        <div class="row row-padding-bottom">
            {{#if isOwner}}
                <div class="col-xs-3 top-bar-content">
                <span class="glyphicon icon-top-bar glyphicon-user glyphicon-style center" aria-hidden="true">
                    <div class="titel">{{getCountStudents}}</div>
                </span>
                </div>
                <div class="col-xs-6 text-center">
                    <div id="appTitle" class="titel subtitel-padding-top">{{votingText}}</div>
                </div>
                <div class="col-xs-3 top-bar-content">
                <span class="glyphicon icon-top-bar glyphicon-hourglass glyphicon-style center" aria-hidden="true">
                    <div class="titel">{{getCountdown}}</div>
                </span>
                </div>
            {{else}}
                <div class=" titel-relative text-light text-center">
                    <div id="appTitle" class="titel margin-to-logo">{{votingText}}</div>
                </div>
            {{/if}}
        </div>
        <div class="row question-wrapper">
            {{#each questionList}}
                <div class="row question-row">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="question-title">Frage {{getNormalizedIndex @index}} / {{allQuestionCount}}</p>
                            </div>
                        </div>
                        {{#if isReadingConfirmationRequired @index}}
                            <div class="row form-group button button-result readingConfirmationProgressRow">
                                <div class="col-xs-5 col-sm-5 col-md-5">
                                    <span class="button-result-letter button-result-readingConfirmation">Lesebestätigung</span>
                                </div>
                                <div class="col-xs-7 col-sm-7 col-md-7">
                                    <div class="progress" style="margin-right: 0;">
                                        <div class="progress-bar" role="progressbar"
                                             aria-valuemin="0" aria-valuemax="100"
                                             style="width:{{getPercentRead @index}}%; background:{{getCSSClassForPercent (getPercentRead @index)}}">
                                                <span class="percentage">{{getCountStudents}} | {{getPercentRead @index}}%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {{/if}}
                        <div class="row">
                            <div class="col-md-12">
                                {{#each answerList @index}}
                                    {{#if isCountdownZero}}
                                        {{> result_button name = name absolute = absolute percent = percent isCorrect = isCorrect }}
                                    {{else}}
                                        {{> result_button name = name absolute = absolute percent = percent isCorrect = -1 }}
                                    {{/if}}
                                {{/each}}
                            </div>
                        </div>
                    </div>
                </div>
            {{/each}}
        </div>
        {{#if isMC}}
            <div class="row" style="margin-top: 50px">
                <div class="col-md-12">
                    {{#if isCountdownZero}}
                        {{> result_button_mc name = "Ganz richtig" absolute = mcOptions.allCorrect.absolute percent = mcOptions.allCorrect.percent isCorrect = 1 id = 0}}
                        {{> result_button_mc name = "Ganz falsch" absolute = mcOptions.allWrong.absolute percent = mcOptions.allWrong.percent isCorrect = 0 id = 1 }}
                    {{else}}
                        {{> result_button_mc name = "Ganz richtig" absolute = mcOptions.allCorrect.absolute percent = mcOptions.allCorrect.percent isCorrect = -1 id = 0}}
                        {{> result_button_mc name = "Ganz falsch" absolute = mcOptions.allWrong.absolute percent = mcOptions.allWrong.percent isCorrect = -1 id = 1 }}
                    {{/if}}
                </div>
            </div>
        {{/if}}

        <div class="fixed-bottom">
            <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <div class="row">
                        {{#if sessionClosed}}
                            {{#if showLeaderBoardButton}}
                                <div class="col-xs-12">
                                    <button id="js-btn-showLeaderBoard" type="button"
                                            class="btn btn-info btn-lg btn-answerOption">
                                        <span class="glyphicon glyphicon-flag glyph-left" aria-hidden="true"></span>
                                        <span class="ansBtn">Rangliste</span>
                                    </button>
                                </div>
                            {{/if}}
                        {{ else }}
                            <div class="col-xs-{{#if isOwner}}4{{else}}6{{/if}}">
                                <button id="js-btn-showQuestionModal" type="button"
                                        class="btn btn-info btn-lg btn-answerOption">
                                    <span class="glyphicon glyphicon-question-sign glyph-left" aria-hidden="true"></span>
                                    <span class="ansBtn">Frage</span>
                                </button>
                            </div>
                            <div class="col-xs-{{#if isOwner}}4{{else}}6{{/if}}">
                                <button id="js-btn-showAnswerModal" type="button" class="btn btn-info btn-lg btn-answerOption">
                                    <span class="glyphicon glyphicon-th-list glyph-left" aria-hidden="true"></span>
                                    <span class="ansBtn">Antworten</span>
                                </button>
                            </div>
                            {{#unless isRunningQuestion}}{{#if isOwner}}
                                <div class="col-xs-4">
                                    <button class="btn btn-info btn-lg btn-answerOption" id="startNextQuestion">
                                        <span class="glyphicon glyphicon-send" aria-hidden="true"></span>
                                        <span class="ansBtn">Starte Frage {{nextQuestionIndex}} von {{allQuestionCount}}</span>
                                    </button>
                                </div>
                            {{/if}}{{/unless}}
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{> splashscreen lazyCloseJsClass='js-splashscreen' noAutorun=true headername="Die Frage" templateName="questionContentSplash" type="splash-screen-show-question"}}
    {{> splashscreen lazyCloseJsClass='js-splashscreen' noAutorun=true headername="Die Antworten" templateName="answerOptionsSplash" type="splash-screen-show-question"}}
</template>

<template name="result_button">
    <div class="row form-group">
        <div class="col-md-12">
            <div class="button button-result">
                <div class="row">
                    <div class="col-xs-1 col-sm-1 col-md-1">
                        <span class="button-result-letter">{{name}}</span>
                    </div>
                    <div class="col-xs-11 col-sm-11 col-md-11">
                        <div class="progress" style="margin-top: 10px">
                            <div class="progress-bar {{getCSSClassForIsCorrect isCorrect}}" role="progressbar"
                                 aria-valuemin="0" aria-valuemax="100"
                                 style="width: {{percent}}%"><span class="percentage">{{absolute}} | {{percent}}%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="result_button_mc">
    <div class="row form-group">
        <div class="col-md-12">
            <div class="button button-result">
                <div class="row">
                    <div id="mc_label{{id}}">
                        <span class="button-result-letter button-result-mc-letter">{{name}}</span>
                    </div>
                    <div id="mc_bar{{id}}">
                        <div class="progress" style="margin-top: 10px">
                            <div class="progress-bar {{getCSSClassForIsCorrect isCorrect}}" role="progressbar"
                                 aria-valuemin="0" aria-valuemax="100"
                                 style="width: {{percent}}%"><span class="percentage">{{absolute}} | {{percent}}%</span>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="successT">
    <p class="splashSmallTitle">Ergebnis</p>
    <br/>

    <div class="row">
        <div class="col-md-12">
            {{#if isSurvey}}
                <p>Du hast erfolgreich an der Umfrage teilgenommen</p>
            {{/if}}
            {{#if isSC}}
                {{#if correct}}
                    <p>Du hast richtig geantwortet!</p>
                {{else}}
                    <p>Du hast falsch geantwortet!</p>
                {{/if}}
            {{/if}}
            {{#if isMC}}
                {{#if correct}}
                    <p>Du hast komplett richtig geantwortet!</p>
                {{else}}
                    <p>Du hast falsch geantwortet!</p>
                {{/if}}
            {{/if}}
            <button class="" onclick="closeSplashscreen();">Fenster Schließen</button>
        </div>
    </div>
</template>